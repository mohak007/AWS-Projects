<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Cloud App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <h1>Forgot Password</h1>
</header>

<main>
    <section>
        <input type="text" id="username" placeholder="Enter registered username"><br>
        <input type="password" id="newPassword" placeholder="Enter new password"><br>
        <button id="resetBtn">Reset Password</button>
        <p id="successMessage"></p>
        <p id="errorMessage"></p>
    </section>
</main>

<footer>
    <p>&copy; 2025 Cloud Technology Guide</p>
</footer>

<script>
document.getElementById("resetBtn").addEventListener("click", async () => {
    const username = document.getElementById("username").value;
    const newPassword = document.getElementById("newPassword").value;

    if (!username || !newPassword) {
        document.getElementById("errorMessage").innerText = "Fill all fields.";
        return;
    }

    try {
        const response = await fetch("https://ggjhtna98g.execute-api.us-east-1.amazonaws.com/dev/todos", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password: newPassword, reset: true })
        });

        const result = await response.json();
        document.getElementById("successMessage").innerHTML = 
            "Password reset successful! <a href='login.html'>Go to Login</a>";
    } catch (error) {
        document.getElementById("errorMessage").innerText = "Error: " + error.message;
    }
});
</script>
</body>
</html>
